Orbital AMM Visual Architecture Guide
System Overview
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Cross-Chain Orbital AMM                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   Frontend   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Backend    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  Blockchain  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ      ‚îÇ   Services   ‚îÇ      ‚îÇ   Contracts  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  Next.js +   ‚îÇ      ‚îÇ              ‚îÇ      ‚îÇ              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  React       ‚îÇ      ‚îÇ  Intent      ‚îÇ      ‚îÇ  Orbital AMM ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ      ‚îÇ  Engine      ‚îÇ      ‚îÇ  (Stylus)    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  Wallet      ‚îÇ      ‚îÇ              ‚îÇ      ‚îÇ              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  Integration ‚îÇ      ‚îÇ  Solver      ‚îÇ      ‚îÇ  Intents     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ      ‚îÇ  Network     ‚îÇ      ‚îÇ  System      ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Core Components
1. Orbital Math Library (orbital-math)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              orbital-math Core Library                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   sphere    ‚îÇ   ‚îÇ superellipse‚îÇ   ‚îÇ    ticks    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ   ‚îÇ             ‚îÇ   ‚îÇ             ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Verify    ‚îÇ   ‚îÇ ‚Ä¢ Flattened ‚îÇ   ‚îÇ ‚Ä¢ Boundary  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   Œ£(r¬≤)=R¬≤  ‚îÇ   ‚îÇ   curves    ‚îÇ   ‚îÇ   checks    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Swaps     ‚îÇ   ‚îÇ ‚Ä¢ Stable    ‚îÇ   ‚îÇ ‚Ä¢ Crossing  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Prices    ‚îÇ   ‚îÇ   optimized ‚îÇ   ‚îÇ   detection ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Impact    ‚îÇ   ‚îÇ             ‚îÇ   ‚îÇ ‚Ä¢ Efficiency‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   trades    ‚îÇ   ‚îÇ    utils    ‚îÇ   ‚îÇ    types    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ   ‚îÇ             ‚îÇ   ‚îÇ             ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Toroidal  ‚îÇ   ‚îÇ ‚Ä¢ Power     ‚îÇ   ‚îÇ ‚Ä¢ Reserve   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   invariant ‚îÇ   ‚îÇ ‚Ä¢ Sqrt      ‚îÇ   ‚îÇ   Point     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Quartic   ‚îÇ   ‚îÇ ‚Ä¢ Dot prod  ‚îÇ   ‚îÇ ‚Ä¢ Tick      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   solver    ‚îÇ   ‚îÇ ‚Ä¢ Lerp      ‚îÇ   ‚îÇ ‚Ä¢ PoolState ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Segment   ‚îÇ   ‚îÇ             ‚îÇ   ‚îÇ ‚Ä¢ TradeInfo ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
2. N-Dimensional Pool Geometry
2D (Circle)
      r‚ÇÅ
      ‚Üë
      |     ‚óè
      |   ‚óè   ‚óè
      |  ‚óè     ‚óè  ‚Üê Reserves on circle: r‚ÇÄ¬≤ + r‚ÇÅ¬≤ = R¬≤
      | ‚óè       ‚óè
      |‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚óè‚îÄ‚îÄ‚Üí r‚ÇÄ
3D (Sphere)
       r‚ÇÇ
       ‚Üë
      ‚ï±‚îÇ‚ï≤
     ‚ï± ‚îÇ ‚ï≤
    ‚ï±  ‚îÇ  ‚ï≤     ‚Üê Reserves on sphere: r‚ÇÄ¬≤ + r‚ÇÅ¬≤ + r‚ÇÇ¬≤ = R¬≤
   ‚ï±   ‚óè   ‚ï≤
  ‚ï±  ‚ï±   ‚ï≤  ‚ï≤
 ‚ï±  ‚ï±     ‚ï≤  ‚ï≤
‚ï±‚îÄ‚îÄ‚ï±‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ï≤‚îÄ‚îÄ‚ï≤‚Üí r‚ÇÅ
  ‚ï±         ‚ï≤
 ‚Üô           ‚Üò
r‚ÇÄ
N-D (Hypersphere)
Œ£(r·µ¢¬≤) = R¬≤  for i = 0 to N-1

All reserve states constrained to N-dimensional sphere surface
3. Tick System
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Nested Tick Structure                        ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ         Equal Price Point                               ‚îÇ
‚îÇ               ‚óè                                         ‚îÇ
‚îÇ           ‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îê                                     ‚îÇ
‚îÇ          ‚ï±         ‚ï≤                                    ‚îÇ
‚îÇ         ‚ï±  Tick 1   ‚ï≤     ‚Üê Tightest: 99% depeg limit  ‚îÇ
‚îÇ        ‚ï±   (Inner)   ‚ï≤                                  ‚îÇ
‚îÇ       ‚ï±               ‚ï≤                                 ‚îÇ
‚îÇ      ‚ï±   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚ï≤                               ‚îÇ
‚îÇ     ‚ï±   ‚ï±  Tick 2   ‚ï≤   ‚ï≤  ‚Üê Medium: 95% depeg limit   ‚îÇ
‚îÇ    ‚ï±   ‚ï±  (Middle)   ‚ï≤   ‚ï≤                             ‚îÇ
‚îÇ   ‚ï±   ‚ï±               ‚ï≤   ‚ï≤                            ‚îÇ
‚îÇ  ‚ï±   ‚ï±   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚ï≤   ‚ï≤                           ‚îÇ
‚îÇ ‚ï±   ‚ï±   ‚ï±  Tick 3   ‚ï≤   ‚ï≤   ‚ï≤ ‚Üê Widest: 90% depeg      ‚îÇ
‚îÇ‚ï±   ‚ï±   ‚ï±  (Outer)    ‚ï≤   ‚ï≤   ‚ï≤                         ‚îÇ
‚îÇ   ‚ï±   ‚ï±               ‚ï≤   ‚ï≤   ‚ï≤                        ‚îÇ
‚îÇ      ‚ï±                 ‚ï≤                                ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ Properties:                                             ‚îÇ
‚îÇ ‚Ä¢ Ticks are NESTED (not disjoint like Uni V3)          ‚îÇ
‚îÇ ‚Ä¢ Smaller ticks = higher capital efficiency            ‚îÇ
‚îÇ ‚Ä¢ LPs choose tick based on risk tolerance              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
4. Toroidal Trading Surface
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Torus (Donut) in 3D                           ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ              ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ                                ‚îÇ
‚îÇ            ‚ï±           ‚ï≤                                ‚îÇ
‚îÇ          ‚ï±   ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚óè ‚ï≤   ‚Üê Boundary ticks (circle)‚îÇ
‚îÇ         ‚îÇ   ‚ï±           ‚ï≤ ‚îÇ                             ‚îÇ
‚îÇ         ‚îÇ  ‚ï±             ‚ï≤‚îÇ                             ‚îÇ
‚îÇ         ‚îÇ ‚îÇ   Interior    ‚îÇ‚îÇ   ‚Üê Interior ticks (sphere)‚îÇ
‚îÇ         ‚îÇ ‚îÇ   ticks       ‚îÇ‚îÇ                            ‚îÇ
‚îÇ         ‚îÇ  ‚ï≤             ‚ï±‚îÇ                             ‚îÇ
‚îÇ         ‚îÇ   ‚ï≤           ‚ï± ‚îÇ                             ‚îÇ
‚îÇ          ‚ï≤   ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚óè  ‚ï±                             ‚îÇ
‚îÇ            ‚ï≤           ‚ï±                                ‚îÇ
‚îÇ              ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ                                ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ Combined Invariant:                                     ‚îÇ
‚îÇ Interior: Œ£(r·µ¢¬≤) = R¬≤         (N-sphere)               ‚îÇ
‚îÇ Boundary: Œ£(r·µ¢¬≤ for i‚â†j) = C  (N-1 sphere)             ‚îÇ
‚îÇ Result: Toroidal surface                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
5. Swap Execution Flow
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Swap Execution                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                           ‚îÇ
‚îÇ  1. User Request                                         ‚îÇ
‚îÇ     ‚îÇ                                                    ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Amount In: 1000 USDC                            ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Token Out: DAI                                  ‚îÇ
‚îÇ     ‚îî‚îÄ‚ñ∫ Min Out: 995 DAI                                ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  2. Calculate Output                                     ‚îÇ
‚îÇ     ‚îÇ                                                    ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Check current reserves                          ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Consolidate interior ticks ‚Üí sphere             ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Consolidate boundary ticks ‚Üí circle             ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Compute toroidal invariant                      ‚îÇ
‚îÇ     ‚îî‚îÄ‚ñ∫ Solve quartic equation                          ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  3. Check Tick Crossings                                ‚îÇ
‚îÇ     ‚îÇ                                                    ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Compute new position                            ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Detect boundary crossings                       ‚îÇ
‚îÇ     ‚îî‚îÄ‚ñ∫ Segment trade if needed                         ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  4. Execute Trade                                        ‚îÇ
‚îÇ     ‚îÇ                                                    ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Update reserves                                 ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Update tick states                              ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Verify invariant                                ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Check slippage                                  ‚îÇ
‚îÇ     ‚îî‚îÄ‚ñ∫ Emit events                                     ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  5. Return Results                                       ‚îÇ
‚îÇ     ‚îÇ                                                    ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Amount Out: 998 DAI                             ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Price Impact: 0.2%                              ‚îÇ
‚îÇ     ‚îú‚îÄ‚ñ∫ Fee: 3 USDC                                     ‚îÇ
‚îÇ     ‚îî‚îÄ‚ñ∫ Ticks Crossed: 1                                ‚îÇ
‚îÇ                                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
6. Capital Efficiency Comparison
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Capital Efficiency vs Depeg Limit                 ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  Efficiency                                               ‚îÇ
‚îÇ     ‚Üë                                                     ‚îÇ
‚îÇ 150x‚î§                     ‚óè                              ‚îÇ
‚îÇ     ‚îÇ                    ‚ï±                               ‚îÇ
‚îÇ 100x‚î§                  ‚óè                                 ‚îÇ
‚îÇ     ‚îÇ                 ‚ï±                                  ‚îÇ
‚îÇ  50x‚î§               ‚óè                                    ‚îÇ
‚îÇ     ‚îÇ              ‚ï±                                     ‚îÇ
‚îÇ  25x‚î§            ‚óè                                       ‚îÇ
‚îÇ     ‚îÇ          ‚ï±                                         ‚îÇ
‚îÇ  15x‚î§       ‚óè                                            ‚îÇ
‚îÇ     ‚îÇ      ‚ï±                                             ‚îÇ
‚îÇ   1x‚î§‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí             ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ               ‚îÇ
‚îÇ     $0.80  $0.85  $0.90  $0.95  $0.99 Depeg Limit      ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  Interpretation:                                          ‚îÇ
‚îÇ  ‚Ä¢ 99% limit = 150x efficiency (great for stable pairs) ‚îÇ
‚îÇ  ‚Ä¢ 95% limit = 15x efficiency (balanced risk/reward)    ‚îÇ
‚îÇ  ‚Ä¢ 80% limit = 1x efficiency (no advantage)             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
7. Cross-Chain Intent Flow
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Cross-Chain Swap Intent                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                ‚îÇ
‚îÇ  User (Ethereum)          Solver Network          Arbitrum   ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ  1. Create Intent      ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ   "Swap 1000 USDC      ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ    for DAI on Arbitrum"‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ  2. Intent Broadcast   ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ       ‚îÇ Solver A: 995 DAI, 500ms     ‚îÇ       ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ       ‚îÇ Solver B: 997 DAI, 300ms     ‚îÇ‚óÑ‚îÄ‚îÄBest‚îÇ       ‚îÇ
‚îÇ       ‚îÇ       ‚îÇ Solver C: 994 DAI, 200ms     ‚îÇ       ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ  3. Lock Funds         ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ   Lock 1000 USDC       ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ  4. Execute on Dest    ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ  Swap via Orbital    ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ  Pool                ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ  5. Proof of Execution ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ  Merkle Proof        ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ  6. Verify & Release   ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ   997 DAI delivered    ‚îÇ                      ‚îÇ       ‚îÇ
‚îÇ       ‚îÇ                        ‚îÇ                      ‚îÇ       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
8. Data Flow in orbital-math
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Data Flow: User Swap Request                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                          ‚îÇ
‚îÇ  Input: SwapRequest                                     ‚îÇ
‚îÇ    ‚îÇ                                                    ‚îÇ
‚îÇ    ‚îú‚îÄ‚ñ∫ pool_id: 123                                    ‚îÇ
‚îÇ    ‚îú‚îÄ‚ñ∫ token_in: 0 (USDC)                              ‚îÇ
‚îÇ    ‚îú‚îÄ‚ñ∫ token_out: 2 (DAI)                              ‚îÇ
‚îÇ    ‚îú‚îÄ‚ñ∫ amount_in: 1000                                 ‚îÇ
‚îÇ    ‚îî‚îÄ‚ñ∫ min_amount_out: 995                             ‚îÇ
‚îÇ              ‚îÇ                                          ‚îÇ
‚îÇ              ‚Üì                                          ‚îÇ
‚îÇ         Load PoolState                                  ‚îÇ
‚îÇ              ‚îÇ                                          ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îÇ
‚îÇ    ‚îÇ reserves: [1M,1M,1M,1M,1M]                        ‚îÇ
‚îÇ    ‚îÇ invariant: R¬≤ = 5M¬≤                               ‚îÇ
‚îÇ    ‚îÇ curve_type: Sphere                                ‚îÇ
‚îÇ    ‚îÇ ticks: [Tick1, Tick2, Tick3]                      ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îÇ
‚îÇ              ‚Üì                                          ‚îÇ
‚îÇ      sphere::calculate_amount_out_sphere()             ‚îÇ
‚îÇ              ‚îÇ                                          ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îÇ
‚îÇ    ‚îÇ 1. Verify inputs                                  ‚îÇ
‚îÇ    ‚îÇ 2. Calculate new reserves                         ‚îÇ
‚îÇ    ‚îÇ 3. Solve: (r‚ÇÄ+1000)¬≤ + r‚ÇÅ¬≤ + (r‚ÇÇ-x)¬≤ + ...= R¬≤  ‚îÇ
‚îÇ    ‚îÇ 4. x = r‚ÇÇ - sqrt(R¬≤ - sum_others)                ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îÇ
‚îÇ              ‚Üì                                          ‚îÇ
‚îÇ        amount_out = 998                                ‚îÇ
‚îÇ              ‚îÇ                                          ‚îÇ
‚îÇ              ‚Üì                                          ‚îÇ
‚îÇ      Calculate price_impact                            ‚îÇ
‚îÇ              ‚îÇ                                          ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îÇ
‚îÇ    ‚îÇ price_before = r‚ÇÄ/r‚ÇÇ                             ‚îÇ
‚îÇ    ‚îÇ price_after = (r‚ÇÄ+1000)/(r‚ÇÇ-998)                 ‚îÇ
‚îÇ    ‚îÇ impact = |before-after|/before                    ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îÇ
‚îÇ              ‚Üì                                          ‚îÇ
‚îÇ        price_impact = 0.2%                             ‚îÇ
‚îÇ              ‚îÇ                                          ‚îÇ
‚îÇ              ‚Üì                                          ‚îÇ
‚îÇ     Check slippage (998 >= 995) ‚úì                     ‚îÇ
‚îÇ              ‚îÇ                                          ‚îÇ
‚îÇ              ‚Üì                                          ‚îÇ
‚îÇ      Update PoolState                                  ‚îÇ
‚îÇ              ‚îÇ                                          ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îÇ
‚îÇ    ‚îÇ reserves: [1M+1k, 1M, 1M-998, 1M, 1M]            ‚îÇ
‚îÇ    ‚îÇ verify_sphere_constraint() ‚úì                      ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îÇ
‚îÇ              ‚Üì                                          ‚îÇ
‚îÇ  Output: TradeInfo                                     ‚îÇ
‚îÇ    ‚îÇ                                                    ‚îÇ
‚îÇ    ‚îú‚îÄ‚ñ∫ amount_out: 998                                 ‚îÇ
‚îÇ    ‚îú‚îÄ‚ñ∫ price_before: 1.0                               ‚îÇ
‚îÇ    ‚îú‚îÄ‚ñ∫ price_after: 1.002                              ‚îÇ
‚îÇ    ‚îú‚îÄ‚ñ∫ price_impact_bp: 20                             ‚îÇ
‚îÇ    ‚îú‚îÄ‚ñ∫ ticks_crossed: 0                                ‚îÇ
‚îÇ    ‚îî‚îÄ‚ñ∫ fee: 3                                          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Mathematical Formulas
Sphere Constraint
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Œ£(r·µ¢¬≤) = R¬≤                            ‚îÇ
‚îÇ  i=0 to N-1                             ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  All reserve states must lie on the     ‚îÇ
‚îÇ  surface of an N-dimensional sphere     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Swap Calculation
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Given: Add Œî·µ¢‚Çô to token i              ‚îÇ
‚îÇ  Find: Œî‚Çí·µ§‚Çú to remove from token j      ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  (r·µ¢ + Œî·µ¢‚Çô)¬≤ + Œ£(r‚Çñ¬≤ for k‚â†i,j) +     ‚îÇ
‚îÇ               (r‚±º - Œî‚Çí·µ§‚Çú)¬≤ = R¬≤        ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  Solve for Œî‚Çí·µ§‚Çú:                        ‚îÇ
‚îÇ  Œî‚Çí·µ§‚Çú = r‚±º - ‚àö(R¬≤ - Œ£(r‚Çñ¬≤ for k‚â†j))   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Price Formula
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Instantaneous price:                    ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚àÇr‚±º/‚àÇr·µ¢ = -r·µ¢/r‚±º                       ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  Price of token j in terms of i:        ‚îÇ
‚îÇ  P = r·µ¢ / r‚±º                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Tick Boundary
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Hyperplane boundary:                    ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  r‚Éó ¬∑ 1‚Éó = c‚àöN                           ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  where 1‚Éó = (1,1,...,1)                 ‚îÇ
‚îÇ       c = plane constant                ‚îÇ
‚îÇ       N = number of tokens              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Capital Efficiency
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  For tick with depeg limit p:           ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  Efficiency = (c + ‚àö(R¬≤-c¬≤/(N-1))) /    ‚îÇ
‚îÇ               ‚àö(R¬≤-c¬≤/(N-1))            ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  Example (N=5, p=0.95):                 ‚îÇ
‚îÇ  Efficiency ‚âà 15x                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Implementation Status
‚úÖ Completed (Green)

Spherical AMM mathematics
Swap calculations (2D to N-D)
Price impact calculations
Utility functions
Error handling
Test coverage > 95%

üî® In Progress (Yellow)

Superellipse curves
Tick geometry
Toroidal invariant
Quartic solver

‚è≥ Planned (Gray)

Multi-tick optimization
Gas optimization
Formal verification
Production audit

Next Steps

Complete superellipse module

Implement fractional powers
Optimize for stablecoins


Build tick system

Boundary checking
Crossing detection
Capital efficiency


Implement toroidal trades

Consolidate ticks
Solve quartic
Handle crossings


Deploy testnet

Integration testing
Gas benchmarks
Security review




This is a living document - Updates as implementation progresses
Last updated: January 2025